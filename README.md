# OKX Trading Bot

FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Ç–æ—Ä–≥–æ–≤–ª–∏ –Ω–∞ OKX –≤ –¥–µ–º–æ-—Ä–µ–∂–∏–º–µ.

## –û–ø–∏—Å–∞–Ω–∏–µ

–≠—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç REST API –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ç–æ—Ä–≥–æ–≤—ã—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π –Ω–∞ OKX API –≤ –¥–µ–º–æ-—Ä–µ–∂–∏–º–µ.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ç–æ—Ä–≥–æ–≤–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è
- ‚úÖ –ü–æ–∫—É–ø–∫–∞ BTC –Ω–∞ 100 USDT
- ‚úÖ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ–µ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è
- ‚úÖ –ü—Ä–æ–¥–∞–∂–∞ –≤—Å–µ–≥–æ –¥–æ—Å—Ç—É–ø–Ω–æ–≥–æ BTC
- ‚úÖ –î–µ–º–æ-—Ä–µ–∂–∏–º (—Å–∏–º—É–ª—è—Ü–∏—è)
- ‚úÖ –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–∏—Å–∞

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone <repository-url>
cd OKX
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
python -m venv venv
```

**Windows:**
```bash
venv\Scripts\activate
```

**Linux/Mac:**
```bash
source venv/bin/activate
```

### 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt
```

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:
```bash
copy env.example .env
```

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env` —Ñ–∞–π–ª, —É–∫–∞–∑–∞–≤ –≤–∞—à–∏ –∫–ª—é—á–∏ OKX API:
```env
# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
DEBUG=false

# OKX API –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
OKX_API_KEY=your_api_key_here
OKX_API_SECRET=your_api_secret_here
OKX_PASSPHRASE=your_passphrase_here
OKX_BASE_URL=https://www.okx.com
```

## –ó–∞–ø—É—Å–∫

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
python -m app.main
```

### –ü—Ä–æ–¥–∞–∫—à–Ω

```bash
python -m uvicorn app.main:app --host 0.0.0.0 --port 8000 --reload
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: http://localhost:8000

## API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:

- **Swagger UI**: http://localhost:8000/docs
- **ReDoc**: http://localhost:8000/redoc

## API –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

### 1. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

```bash
curl "http://localhost:8000/api/v1/test-connection"
```

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å OKX API –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä—É–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã SSL/TLS.

### 2. –ü–æ–∫—É–ø–∫–∞ BTC (POST)

```bash
curl -X POST "http://localhost:8000/api/v1/buy" \
  -H "Content-Type: application/json" \
  -d '{"buy_amount": 100.0, "inst_id": "BTC-USDT"}'
```

### 3. –ü–æ–∫—É–ø–∫–∞ BTC (GET)

```bash
curl "http://localhost:8000/api/v1/buy?buy_amount=15.0&inst_id=BTC-USDT"
```

### 4. –ü—Ä–æ–¥–∞–∂–∞ BTC (POST)

```bash
curl -X POST "http://localhost:8000/api/v1/sell" \
  -H "Content-Type: application/json" \
  -d '{"sell_all": true, "inst_id": "BTC-USDT"}'
```

### 5. –ü—Ä–æ–¥–∞–∂–∞ BTC (GET)

```bash
curl "http://localhost:8000/api/v1/sell?sell_all=true&inst_id=BTC-USDT"
```

### 6. –ü–æ–ª—É—á–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–æ–≤

```bash
curl "http://localhost:8000/api/v1/balance"
```

### 7. –ü–æ–ª—É—á–µ–Ω–∏–µ —É–ø—Ä–æ—â–µ–Ω–Ω—ã—Ö —Ä—ã–Ω–æ—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (POST)

```bash
curl -X POST "http://localhost:8000/api/v1/market-data" \
  -H "Content-Type: application/json" \
  -d '{"inst_id": "BTC-USDT"}'
```

### 8. –ü–æ–ª—É—á–µ–Ω–∏–µ —É–ø—Ä–æ—â–µ–Ω–Ω—ã—Ö —Ä—ã–Ω–æ—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (GET)

```bash
curl "http://localhost:8000/api/v1/market-data?inst_id=BTC-USDT"
```

**–í–∫–ª—é—á–∞–µ—Ç**: —Ç–∏–∫–µ—Ä, —Å—Ç–∞–∫–∞–Ω –æ—Ä–¥–µ—Ä–æ–≤ (3 —É—Ä–æ–≤–Ω—è), –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 —Å–≤–µ—á–µ–π

### 9. –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤—Å–µ—Ö —Ç–∏–∫–µ—Ä–æ–≤ (POST)

```bash
curl -X POST "http://localhost:8000/api/v1/tickers" \
  -H "Content-Type: application/json" \
  -d '{"inst_type": "SPOT"}'
```

### 10. –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤—Å–µ—Ö —Ç–∏–∫–µ—Ä–æ–≤ (GET)

```bash
curl "http://localhost:8000/api/v1/tickers?inst_type=SWAP"
```

### 11. –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –≤–∞–ª—é—Ç–∞—Ö

```bash
curl "http://localhost:8000/api/v1/currencies"
```

### 12. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–∏—Å–∞

```bash
curl "http://localhost:8000/api/v1/health"
```

## ‚ö†Ô∏è –í–∞–∂–Ω–æ: –¢–æ—Ä–≥–æ–≤–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç **—Ä–∞–∑–¥–µ–ª–µ–Ω–Ω—ã–µ —Ç–æ—Ä–≥–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏** –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å n8n –∏ –¥—Ä—É–≥–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏:

### –¢–æ—Ä–≥–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

- **–ü–æ–∫—É–ø–∫–∞**: `/api/v1/buy` - –ø–æ–∫—É–ø–∫–∞ BTC –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—É—é —Å—É–º–º—É USDT
- **–ü—Ä–æ–¥–∞–∂–∞**: `/api/v1/sell` - –ø—Ä–æ–¥–∞–∂–∞ BTC –∑–∞ USDT
- **–ë–∞–ª–∞–Ω—Å**: `/api/v1/balance` - –ø–æ–ª—É—á–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–æ–≤ –≤—Å–µ—Ö –≤–∞–ª—é—Ç

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- –ö–æ–Ω—Ç—Ä–æ–ª—å –≤—Ä–µ–º–µ–Ω–∏ –æ–∂–∏–¥–∞–Ω–∏—è –≤ n8n
- –ù–µ–∑–∞–≤–∏—Å–∏–º–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π
- –õ—É—á—à–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –ì–∏–±–∫–æ—Å—Ç—å –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π

**–î–µ–º–æ-—Ä–µ–∂–∏–º**: –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ —Å–∏–º—É–ª—è—Ü–∏–æ–Ω–Ω–æ–º —Ä–µ–∂–∏–º–µ (`x-simulated-trading: 1`)

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**:
- `buy_amount`: –°—É–º–º–∞ –≤ USDT –¥–ª—è –ø–æ–∫—É–ø–∫–∏ BTC (–±–æ–ª—å—à–µ 0, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10.0)
- `sell_all`: –ü—Ä–æ–¥–∞—Ç—å –≤–µ—Å—å –¥–æ—Å—Ç—É–ø–Ω—ã–π BTC (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é True)
- `sell_amount`: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ BTC –¥–ª—è –ø—Ä–æ–¥–∞–∂–∏ (–µ—Å–ª–∏ sell_all=False)
- `inst_id`: –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Ç–æ—Ä–≥–æ–≤–ª–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é BTC-USDT)

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ API –∫–ª—é—á–∞ –¥–ª—è –¥–µ–º–æ-—Ç–æ—Ä–≥–æ–≤–ª–∏

–î–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–µ–º–æ-—Ç–æ—Ä–≥–æ–≤–ª–µ–π –≤ OKX –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ:

### 1. –°–æ–∑–¥–∞–Ω–∏–µ API –∫–ª—é—á–∞ –≤ OKX
1. –í–æ–π–¥–∏—Ç–µ –≤ –∞–∫–∫–∞—É–Ω—Ç OKX
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **API Management**
3. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π API –∫–ª—é—á —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏:
   - **–ù–∞–∑–≤–∞–Ω–∏–µ**: `Demo_Trading_Bot`
   - **–†–∞–∑—Ä–µ—à–µ–Ω–∏—è**: `–ß—Ç–µ–Ω–∏–µ`, `–¢–æ—Ä–≥–æ–≤–ª—è`
   - **IP-–∞–¥—Ä–µ—Å**: –û—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º –∏–ª–∏ —É–∫–∞–∂–∏—Ç–µ –≤–∞—à IP
   - **–¢–æ—Ä–≥–æ–≤–ª—è**: ‚úÖ –í–∫–ª—é—á–µ–Ω–∞
   - **–î–µ–º–æ-—Ç–æ—Ä–≥–æ–≤–ª—è**: ‚úÖ –í–∫–ª—é—á–µ–Ω–∞

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ .env —Ñ–∞–π–ª–∞
```bash
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ env.example –≤ .env
cp env.example .env

# –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
OKX_API_KEY=–≤–∞—à_api_–∫–ª—é—á
OKX_API_SECRET=–≤–∞—à_—Å–µ–∫—Ä–µ—Ç–Ω—ã–π_–∫–ª—é—á
OKX_PASSPHRASE=–≤–∞—à_–ø–∞—Ä–æ–ª—å
OKX_BASE_URL=https://www.okx.com
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫
```bash
curl "http://localhost:8000/api/v1/health"
```

–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å:
```json
{
  "status": "healthy",
  "api_key_configured": true,
  "api_secret_configured": true,
  "passphrase_configured": true
}
```

## –ü—Ä–∏–º–µ—Ä—ã –æ—Ç–≤–µ—Ç–æ–≤

### –£—Å–ø–µ—à–Ω–∞—è –ø–æ–∫—É–ø–∫–∞ BTC

```json
{
  "success": true,
  "buy_amount": 10.0,
  "buy_order": {
    "code": "0",
    "data": [{"ordId": "2724253814203600896", "sMsg": "Order placed"}]
  },
  "btc_acquired": 0.001234,
  "message": "BTC —É—Å–ø–µ—à–Ω–æ –∫—É–ø–ª–µ–Ω –Ω–∞ 10.0 USDT"
}
```

### –£—Å–ø–µ—à–Ω–∞—è –ø—Ä–æ–¥–∞–∂–∞ BTC

```json
{
  "success": true,
  "sell_order": {
    "code": "0",
    "data": [{"ordId": "2724263944018186240", "sMsg": "Order placed"}]
  },
  "btc_sold": 0.001234,
  "usdt_received": 10.5,
  "message": "BTC —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ–¥–∞–Ω –∑–∞ 10.5 USDT"
}
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–æ–≤

```json
{
  "success": true,
  "balances": {
    "BTC": 0.001234,
    "USDT": 89.5
  },
  "message": "–ë–∞–ª–∞–Ω—Å —É—Å–ø–µ—à–Ω–æ –ø–æ–ª—É—á–µ–Ω"
}
```

### –û—Ç–≤–µ—Ç —Å –æ—à–∏–±–∫–æ–π

```json
{
  "error": "API_SECRET –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω",
  "detail": "–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ .env —Ñ–∞–π–ª–µ"
}
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
OKX/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ main.py                 # –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ endpoints.py        # API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ schemas.py          # Pydantic —Å—Ö–µ–º—ã
‚îÇ   ‚îú‚îÄ‚îÄ core/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config.py           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ logger.py           # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ services/
‚îÇ       ‚îú‚îÄ‚îÄ __init__.py
‚îÇ       ‚îî‚îÄ‚îÄ okx_service.py      # –°–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å OKX API
‚îú‚îÄ‚îÄ logs/                       # –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ requirements.txt            # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ env.example                 # –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îî‚îÄ‚îÄ README.md                   # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `loguru` –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è. –õ–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤:

- **–ö–æ–Ω—Å–æ–ª—å**: –¶–≤–µ—Ç–Ω–æ–π –≤—ã–≤–æ–¥ —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏
- **–§–∞–π–ª**: `logs/app.log` —Å —Ä–æ—Ç–∞—Ü–∏–µ–π (10 MB, 7 –¥–Ω–µ–π)

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚ö†Ô∏è **–í–∞–∂–Ω–æ**: –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ —Ñ–∞–π–ª `.env` —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –∫–ª—é—á–∞–º–∏ API –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π!

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:

1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–µ–∫—Ä–µ—Ç–æ–≤
2. –û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –¥–æ—Å—Ç—É–ø –∫ API —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º–∏ IP –∞–¥—Ä–µ—Å–∞–º–∏
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
4. –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
pytest tests/
```

### –ö–ª—é—á–µ–≤—ã–µ —Ç–µ—Å—Ç-–∫–µ–π—Å—ã

- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ–¥–ø–∏—Å–∏ –¥–ª—è GET –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ–¥–ø–∏—Å–∏ –¥–ª—è POST –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ API
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–∏—Å–∞

## –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:

1. **Load Balancer**: Nginx –∏–ª–∏ HAProxy
2. **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è**: Docker + Docker Compose
3. **–û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è**: Kubernetes –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
4. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: Redis –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–µ—Ç–æ–∫

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- **–ú–µ—Ç—Ä–∏–∫–∏**: Prometheus + Grafana
- **–õ–æ–≥–∏**: ELK Stack (Elasticsearch, Logstash, Kibana)
- **–¢—Ä–µ–π—Å–∏–Ω–≥**: Jaeger –∏–ª–∏ Zipkin

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **"API_SECRET –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω"**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª `.env`
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω—ã

2. **"–û—à–∏–±–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –∫ —Å–µ—Ä–≤–µ—Ä—É"**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ OKX API –¥–æ—Å—Ç—É–ø–µ–Ω

3. **"–ù–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π HTTP –º–µ—Ç–æ–¥"**
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ: GET, POST, PUT, DELETE

### SSL/TLS –æ—à–∏–±–∫–∏

–ï—Å–ª–∏ –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ –æ—à–∏–±–∫–∏ `SSLError` –∏–ª–∏ `Max retries exceeded`, —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–≤—è–∑–∞–Ω–æ —Å:

1. **–£—Å—Ç–∞—Ä–µ–≤—à–∏–º–∏ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏** –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
2. **–§–∞–π—Ä–≤–æ–ª–æ–º** –∏–ª–∏ **–ø—Ä–æ–∫—Å–∏**, –±–ª–æ–∫–∏—Ä—É—é—â–∏–º–∏ HTTPS —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
3. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ —Å–µ—Ç–∏**

#### –†–µ—à–µ–Ω–∏—è:

1. **–û–±–Ω–æ–≤–∏—Ç–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã**:
   ```bash
   sudo apt update
   sudo apt install ca-certificates
   sudo update-ca-certificates
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π—Ä–≤–æ–ª**:
   ```bash
   sudo ufw status
   # –ï—Å–ª–∏ —Ñ–∞–π—Ä–≤–æ–ª –∞–∫—Ç–∏–≤–µ–Ω, —Ä–∞–∑—Ä–µ—à–∏—Ç–µ –∏—Å—Ö–æ–¥—è—â–∏–µ HTTPS —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
   sudo ufw allow out 443
   ```

3. **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ**:
   ```bash
   curl "http://your-server:8000/api/v1/test-connection"
   ```

4. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç**:
   ```bash
   python test_ssl.py
   ```

5. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ DNS**:
   ```bash
   nslookup www.okx.com
   ping www.okx.com
   ```

### –û—à–∏–±–∫–∏ "socket hang up" / "ECONNRESET"

–ï—Å–ª–∏ –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ –æ—à–∏–±–∫–∏ `socket hang up` –∏–ª–∏ `ECONNRESET` –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –∫ FastAPI —Å–µ—Ä–≤–µ—Ä—É, —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–≤—è–∑–∞–Ω–æ —Å:

1. **–ù–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–º –∑–∞–∫—Ä—ã—Ç–∏–µ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è** —Å–µ—Ä–≤–µ—Ä–æ–º
2. **–ü—Ä–æ–±–ª–µ–º–∞–º–∏ —Å —Ñ–∞–π—Ä–≤–æ–ª–æ–º** –∏–ª–∏ **–ø—Ä–æ–∫—Å–∏**
3. **–¢–∞–π–º–∞—É—Ç–∞–º–∏** –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞ –∏–ª–∏ —Å–µ—Ä–≤–µ—Ä–∞
4. **–ü–µ—Ä–µ–≥—Ä—É–∑–∫–æ–π —Å–µ—Ä–≤–µ—Ä–∞**

#### –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:

1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ç–µ–≤—É—é –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É**:
   ```bash
   python test_network.py
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞**:
   ```bash
   tail -f logs/app.log
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø–æ—Ä—Ç–∞**:
   ```bash
   telnet 109.73.192.126 8001
   # –∏–ª–∏
   nc -zv 109.73.192.126 8001
   ```

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π—Ä–≤–æ–ª –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ**:
   ```bash
   sudo ufw status
   sudo iptables -L
   ```

#### –†–µ—à–µ–Ω–∏—è:

1. **–£–≤–µ–ª–∏—á—å—Ç–µ —Ç–∞–π–º–∞—É—Ç—ã –≤ n8n**:
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `timeout: 60000` (60 —Å–µ–∫—É–Ω–¥)
   - –£–≤–µ–ª–∏—á—å—Ç–µ `followRedirect: true`

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞**:
   ```bash
   # –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
   pkill -f "python.*main.py"
   python -m app.main
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ—Ç–µ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏**:
   ```bash
   # –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ—Ä—Ç –æ—Ç–∫—Ä—ã—Ç
   netstat -tlnp | grep 8001
   
   # –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π—Ä–≤–æ–ª
   sudo ufw allow 8001
   ```

4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤**:
   ```bash
   # –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ –∏ CPU
   htop
   
   # –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ—Ç–µ–≤—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
   netstat -an | grep 8001
   ```

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º —Å–æ–∑–¥–∞–π—Ç–µ issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –∏–ª–∏ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ OKX API. 