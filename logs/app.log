2025-07-25 15:00:50 | INFO     | __main__:<module>:97 - Запуск приложения OKX API Helper v1.0.0
2025-07-25 15:00:50 | INFO     | app.main:log_requests:43 - Входящий запрос: GET http://localhost:8000/
2025-07-25 15:00:50 | INFO     | app.main:log_requests:52 - Запрос обработан: GET http://localhost:8000/ - 200 (0.001s)
2025-07-25 15:00:54 | INFO     | app.main:log_requests:43 - Входящий запрос: GET http://localhost:8000/api/v1/health
2025-07-25 15:00:55 | INFO     | app.services.okx_service:get_server_timestamp:39 - Получена временная метка сервера: 1753444854
2025-07-25 15:00:55 | INFO     | app.main:log_requests:52 - Запрос обработан: GET http://localhost:8000/api/v1/health - 200 (1.008s)
2025-07-25 15:01:01 | INFO     | app.main:log_requests:43 - Входящий запрос: GET http://localhost:8000/api/v1/sign?method=POST&path=/api/v5/trade/order&body="instId":"BTC-USDT"
2025-07-25 15:01:01 | INFO     | app.api.endpoints:get_signature:40 - Запрос на генерацию подписи: POST /api/v5/trade/order
2025-07-25 15:01:02 | INFO     | app.services.okx_service:get_server_timestamp:39 - Получена временная метка сервера: 1753444860
2025-07-25 15:01:02 | DEBUG    | app.services.okx_service:generate_signature:84 - Сгенерирована подпись для: POST /api/v5/trade/order
2025-07-25 15:01:02 | INFO     | app.services.okx_service:get_sign_and_timestamp:153 - Получены подпись и временная метка для POST /api/v5/trade/order
2025-07-25 15:01:02 | INFO     | app.api.endpoints:get_signature:66 - Успешно сгенерирована подпись для POST /api/v5/trade/order
2025-07-25 15:01:02 | INFO     | app.main:log_requests:52 - Запрос обработан: GET http://localhost:8000/api/v1/sign?method=POST&path=/api/v5/trade/order&body="instId":"BTC-USDT" - 200 (0.948s)
2025-07-25 15:01:36 | INFO     | app.main:log_requests:43 - Входящий запрос: GET http://localhost:8000/api/v1/health
2025-07-25 15:01:37 | INFO     | app.services.okx_service:get_server_timestamp:39 - Получена временная метка сервера: 1753444895
2025-07-25 15:01:37 | INFO     | app.main:log_requests:52 - Запрос обработан: GET http://localhost:8000/api/v1/health - 200 (0.884s)
2025-07-25 15:01:39 | INFO     | app.main:log_requests:43 - Входящий запрос: GET http://localhost:8000/api/v1/sign?method=POST&path=%2Fapi%2Fv5%2Ftrade%2Forder&body=%7B%22instId%22%3A%22BTC-USDT%22%2C%22tdMode%22%3A%22cash%22%2C%22side%22%3A%22buy%22%2C%22ordType%22%3A%22limit%22%2C%22sz%22%3A%220.001%22%7D
2025-07-25 15:01:39 | INFO     | app.api.endpoints:get_signature:40 - Запрос на генерацию подписи: POST /api/v5/trade/order
2025-07-25 15:01:39 | INFO     | app.services.okx_service:get_server_timestamp:39 - Получена временная метка сервера: 1753444898
2025-07-25 15:01:39 | DEBUG    | app.services.okx_service:generate_signature:84 - Сгенерирована подпись для: POST /api/v5/trade/order
2025-07-25 15:01:39 | INFO     | app.services.okx_service:get_sign_and_timestamp:153 - Получены подпись и временная метка для POST /api/v5/trade/order
2025-07-25 15:01:39 | INFO     | app.api.endpoints:get_signature:66 - Успешно сгенерирована подпись для POST /api/v5/trade/order
2025-07-25 15:01:39 | INFO     | app.main:log_requests:52 - Запрос обработан: GET http://localhost:8000/api/v1/sign?method=POST&path=%2Fapi%2Fv5%2Ftrade%2Forder&body=%7B%22instId%22%3A%22BTC-USDT%22%2C%22tdMode%22%3A%22cash%22%2C%22side%22%3A%22buy%22%2C%22ordType%22%3A%22limit%22%2C%22sz%22%3A%220.001%22%7D - 200 (0.888s)
2025-07-25 15:01:41 | INFO     | app.main:log_requests:43 - Входящий запрос: POST http://localhost:8000/api/v1/sign
2025-07-25 15:01:41 | INFO     | app.api.endpoints:get_signature_post:101 - POST запрос на генерацию подписи: GET /api/v5/account/balance
2025-07-25 15:01:42 | INFO     | app.services.okx_service:get_server_timestamp:39 - Получена временная метка сервера: 1753444901
2025-07-25 15:01:42 | DEBUG    | app.services.okx_service:generate_signature:84 - Сгенерирована подпись для: GET /api/v5/account/balance
2025-07-25 15:01:42 | INFO     | app.services.okx_service:get_sign_and_timestamp:153 - Получены подпись и временная метка для GET /api/v5/account/balance
2025-07-25 15:01:42 | INFO     | app.api.endpoints:get_signature_post:121 - Успешно сгенерирована подпись для GET /api/v5/account/balance
2025-07-25 15:01:42 | INFO     | app.main:log_requests:52 - Запрос обработан: POST http://localhost:8000/api/v1/sign - 200 (0.913s)
2025-07-25 15:01:44 | INFO     | app.main:log_requests:43 - Входящий запрос: GET http://localhost:8000/api/v1/sign?method=GET&path=%2Fapi%2Fv5%2Faccount%2Fbalance&body=
2025-07-25 15:01:44 | INFO     | app.api.endpoints:get_signature:40 - Запрос на генерацию подписи: GET /api/v5/account/balance
2025-07-25 15:01:45 | INFO     | app.services.okx_service:get_server_timestamp:39 - Получена временная метка сервера: 1753444904
2025-07-25 15:01:45 | DEBUG    | app.services.okx_service:generate_signature:84 - Сгенерирована подпись для: GET /api/v5/account/balance
2025-07-25 15:01:45 | INFO     | app.services.okx_service:get_sign_and_timestamp:153 - Получены подпись и временная метка для GET /api/v5/account/balance
2025-07-25 15:01:45 | INFO     | app.api.endpoints:get_signature:66 - Успешно сгенерирована подпись для GET /api/v5/account/balance
2025-07-25 15:01:45 | INFO     | app.main:log_requests:52 - Запрос обработан: GET http://localhost:8000/api/v1/sign?method=GET&path=%2Fapi%2Fv5%2Faccount%2Fbalance&body= - 200 (0.873s)
2025-07-29 14:27:28 | INFO     | app.main:log_requests:47 - Входящий запрос: GET http://localhost:8000/api/v1/health
2025-07-29 14:27:28 | INFO     | app.main:log_requests:48 - Клиент: 127.0.0.1, User-Agent: curl/8.13.0
2025-07-29 14:27:28 | INFO     | app.services.okx_service:get_server_timestamp:44 - Сгенерирована временная метка ISO 8601 для OKX: 2025-07-29T11:27:28Z
2025-07-29 14:27:28 | INFO     | app.main:log_requests:58 - Запрос обработан: GET http://localhost:8000/api/v1/health - 200 (0.006s)
2025-07-29 14:27:33 | INFO     | app.main:log_requests:47 - Входящий запрос: GET http://localhost:8000/api/v1/balance
2025-07-29 14:27:33 | INFO     | app.main:log_requests:48 - Клиент: 127.0.0.1, User-Agent: curl/8.13.0
2025-07-29 14:27:33 | INFO     | app.api.endpoints:get_balances:530 - Запрос на получение балансов всех валют
2025-07-29 14:27:33 | INFO     | app.services.okx_service:get_balances:598 - Получение балансов всех валют
2025-07-29 14:27:33 | INFO     | app.services.okx_service:get_server_timestamp:44 - Сгенерирована временная метка ISO 8601 для OKX: 2025-07-29T11:27:33Z
2025-07-29 14:27:33 | INFO     | app.services.okx_service:generate_signature:128 - Сообщение для подписи: '2025-07-29T11:27:33ZGET/api/v5/account/balance'
2025-07-29 14:27:33 | INFO     | app.services.okx_service:generate_signature:129 - Длина сообщения: 46
2025-07-29 14:27:33 | INFO     | app.services.okx_service:generate_signature:130 - Body: '' (длина: 0)
2025-07-29 14:27:33 | INFO     | app.services.okx_service:generate_signature:139 - Сгенерирована подпись: Em0uDPRo/SwChbMJSXSqNZRpv9Do20VI7j8o89G2wtI=
2025-07-29 14:27:33 | INFO     | app.services.okx_service:get_auth_headers:175 - Сгенерированы заголовки авторизации для GET /api/v5/account/balance
2025-07-29 14:27:34 | INFO     | app.services.okx_service:get_balances:634 - Балансы успешно получены: {}
2025-07-29 14:27:34 | INFO     | app.api.endpoints:get_balances:541 - Балансы получены: Баланс успешно получен
2025-07-29 14:27:34 | INFO     | app.main:log_requests:58 - Запрос обработан: GET http://localhost:8000/api/v1/balance - 200 (1.167s)
2025-07-29 14:27:38 | INFO     | app.main:log_requests:47 - Входящий запрос: GET http://localhost:8000/api/v1/buy?buy_amount=5.0
2025-07-29 14:27:38 | INFO     | app.main:log_requests:48 - Клиент: 127.0.0.1, User-Agent: curl/8.13.0
2025-07-29 14:27:38 | INFO     | app.api.endpoints:buy_btc_get:369 - GET запрос на покупку BTC: сумма 5.0 USDT, инструмент BTC-USDT
2025-07-29 14:27:38 | INFO     | app.services.okx_service:buy_btc:481 - === НАЧАЛО ПОКУПКИ BTC ===
2025-07-29 14:27:38 | INFO     | app.services.okx_service:buy_btc:482 - Сумма покупки: 5.0 USDT
2025-07-29 14:27:38 | INFO     | app.services.okx_service:buy_btc:483 - Инструмент: BTC-USDT
2025-07-29 14:27:38 | INFO     | app.services.okx_service:place_market_order:243 - BUY BODY: {"instId":"BTC-USDT","tdMode":"cash","side":"buy","ordType":"market","ccy":"USDT","sz":"5.0"}
2025-07-29 14:27:38 | INFO     | app.services.okx_service:get_server_timestamp:44 - Сгенерирована временная метка ISO 8601 для OKX: 2025-07-29T11:27:38Z
2025-07-29 14:27:38 | INFO     | app.services.okx_service:generate_signature:128 - Сообщение для подписи: '2025-07-29T11:27:38ZPOST/api/v5/trade/order{"instId":"BTC-USDT","tdMode":"cash","side":"buy","ordType":"market","ccy":"USDT","sz":"5.0"}'
2025-07-29 14:27:38 | INFO     | app.services.okx_service:generate_signature:129 - Длина сообщения: 136
2025-07-29 14:27:38 | INFO     | app.services.okx_service:generate_signature:130 - Body: '{"instId":"BTC-USDT","tdMode":"cash","side":"buy","ordType":"market","ccy":"USDT","sz":"5.0"}' (длина: 93)
2025-07-29 14:27:38 | INFO     | app.services.okx_service:generate_signature:139 - Сгенерирована подпись: ncw/EvIwnHh7BlazQPL93ufEbsbepaLvhYKOrvwLY+M=
2025-07-29 14:27:38 | INFO     | app.services.okx_service:get_auth_headers:175 - Сгенерированы заголовки авторизации для POST /api/v5/trade/order
2025-07-29 14:27:38 | INFO     | app.services.okx_service:place_market_order:256 - BUY ORDER RESULT: {"msg":"This API key doesn't have permission to use this function","code":"50120"}
2025-07-29 14:27:38 | INFO     | app.services.okx_service:get_server_timestamp:44 - Сгенерирована временная метка ISO 8601 для OKX: 2025-07-29T11:27:38Z
2025-07-29 14:27:38 | INFO     | app.services.okx_service:generate_signature:128 - Сообщение для подписи: '2025-07-29T11:27:38ZGET/api/v5/account/balance?ccy=BTC'
2025-07-29 14:27:38 | INFO     | app.services.okx_service:generate_signature:129 - Длина сообщения: 54
2025-07-29 14:27:38 | INFO     | app.services.okx_service:generate_signature:130 - Body: '' (длина: 0)
2025-07-29 14:27:38 | INFO     | app.services.okx_service:generate_signature:139 - Сгенерирована подпись: Y+V3XONcqesRR7CuruvufoCMPOn2WZ5W57oTlrf5RY4=
2025-07-29 14:27:38 | INFO     | app.services.okx_service:get_auth_headers:175 - Сгенерированы заголовки авторизации для GET /api/v5/account/balance?ccy=BTC
2025-07-29 14:27:38 | ERROR    | app.services.okx_service:buy_btc:505 - Ошибка покупки BTC: 'data'
2025-07-29 14:27:38 | INFO     | app.api.endpoints:buy_btc_get:382 - Покупка BTC завершена: Ошибка покупки BTC: 'data'
2025-07-29 14:27:38 | INFO     | app.main:log_requests:58 - Запрос обработан: GET http://localhost:8000/api/v1/buy?buy_amount=5.0 - 200 (0.766s)
2025-07-29 14:27:44 | INFO     | app.main:log_requests:47 - Входящий запрос: GET http://localhost:8000/api/v1/sell?sell_all=true
2025-07-29 14:27:44 | INFO     | app.main:log_requests:48 - Клиент: 127.0.0.1, User-Agent: curl/8.13.0
2025-07-29 14:27:44 | INFO     | app.api.endpoints:sell_btc_get:481 - GET запрос на продажу BTC: продать все True, инструмент BTC-USDT
2025-07-29 14:27:44 | INFO     | app.services.okx_service:sell_btc:528 - === НАЧАЛО ПРОДАЖИ BTC ===
2025-07-29 14:27:44 | INFO     | app.services.okx_service:sell_btc:529 - Продать все: True
2025-07-29 14:27:44 | INFO     | app.services.okx_service:sell_btc:532 - Инструмент: BTC-USDT
2025-07-29 14:27:44 | INFO     | app.services.okx_service:get_server_timestamp:44 - Сгенерирована временная метка ISO 8601 для OKX: 2025-07-29T11:27:44Z
2025-07-29 14:27:44 | INFO     | app.services.okx_service:generate_signature:128 - Сообщение для подписи: '2025-07-29T11:27:44ZGET/api/v5/account/balance?ccy=BTC'
2025-07-29 14:27:44 | INFO     | app.services.okx_service:generate_signature:129 - Длина сообщения: 54
2025-07-29 14:27:44 | INFO     | app.services.okx_service:generate_signature:130 - Body: '' (длина: 0)
2025-07-29 14:27:44 | INFO     | app.services.okx_service:generate_signature:139 - Сгенерирована подпись: vXX/RNKMNSx1DPtgkLkFqZE/QQQ/Mjx8LNv/uFetxS0=
2025-07-29 14:27:44 | INFO     | app.services.okx_service:get_auth_headers:175 - Сгенерированы заголовки авторизации для GET /api/v5/account/balance?ccy=BTC
2025-07-29 14:27:44 | ERROR    | app.services.okx_service:sell_btc:580 - Ошибка продажи BTC: 'data'
2025-07-29 14:27:44 | INFO     | app.api.endpoints:sell_btc_get:500 - Продажа BTC завершена: Ошибка продажи BTC: 'data'
2025-07-29 14:27:44 | INFO     | app.main:log_requests:58 - Запрос обработан: GET http://localhost:8000/api/v1/sell?sell_all=true - 200 (0.394s)
2025-07-29 14:45:34 | INFO     | app.main:log_requests:47 - Входящий запрос: GET http://localhost:8000/api/v1/health
2025-07-29 14:45:34 | INFO     | app.main:log_requests:48 - Клиент: 127.0.0.1, User-Agent: curl/8.13.0
2025-07-29 14:45:34 | INFO     | app.services.okx_service:get_server_timestamp:44 - Сгенерирована временная метка ISO 8601 для OKX: 2025-07-29T11:45:34Z
2025-07-29 14:45:34 | INFO     | app.main:log_requests:58 - Запрос обработан: GET http://localhost:8000/api/v1/health - 200 (0.009s)
2025-07-29 14:45:42 | INFO     | app.main:log_requests:47 - Входящий запрос: GET http://localhost:8000/docs
2025-07-29 14:45:42 | INFO     | app.main:log_requests:48 - Клиент: 127.0.0.1, User-Agent: curl/8.13.0
2025-07-29 14:45:42 | INFO     | app.main:log_requests:58 - Запрос обработан: GET http://localhost:8000/docs - 200 (0.001s)
2025-07-29 14:45:47 | INFO     | app.main:log_requests:47 - Входящий запрос: GET http://localhost:8000/openapi.json
2025-07-29 14:45:47 | INFO     | app.main:log_requests:48 - Клиент: 127.0.0.1, User-Agent: curl/8.13.0
2025-07-29 14:45:47 | INFO     | app.main:log_requests:58 - Запрос обработан: GET http://localhost:8000/openapi.json - 200 (0.020s)
2025-07-29 14:45:53 | INFO     | app.main:log_requests:47 - Входящий запрос: GET http://localhost:8000/openapi.json
2025-07-29 14:45:53 | INFO     | app.main:log_requests:48 - Клиент: 127.0.0.1, User-Agent: curl/8.13.0
2025-07-29 14:45:53 | INFO     | app.main:log_requests:58 - Запрос обработан: GET http://localhost:8000/openapi.json - 200 (0.002s)
2025-07-29 14:49:31 | INFO     | app.main:log_requests:47 - Входящий запрос: GET http://localhost:8000/api/v1/buy?buy_amount=10.0
2025-07-29 14:49:31 | INFO     | app.main:log_requests:48 - Клиент: 127.0.0.1, User-Agent: curl/8.13.0
2025-07-29 14:49:31 | INFO     | app.api.endpoints:buy_btc_get:369 - GET запрос на покупку BTC: сумма 10.0 USDT, инструмент BTC-USDT
2025-07-29 14:49:31 | INFO     | app.services.okx_service:buy_btc:505 - === НАЧАЛО ПОКУПКИ BTC ===
2025-07-29 14:49:31 | INFO     | app.services.okx_service:buy_btc:506 - Сумма покупки: 10.0 USDT
2025-07-29 14:49:31 | INFO     | app.services.okx_service:buy_btc:507 - Инструмент: BTC-USDT
2025-07-29 14:49:31 | INFO     | app.services.okx_service:place_market_order:243 - BUY BODY: {"instId":"BTC-USDT","tdMode":"cash","side":"buy","ordType":"market","ccy":"USDT","sz":"10.0"}
2025-07-29 14:49:31 | INFO     | app.services.okx_service:get_server_timestamp:44 - Сгенерирована временная метка ISO 8601 для OKX: 2025-07-29T11:49:31Z
2025-07-29 14:49:31 | INFO     | app.services.okx_service:generate_signature:128 - Сообщение для подписи: '2025-07-29T11:49:31ZPOST/api/v5/trade/order{"instId":"BTC-USDT","tdMode":"cash","side":"buy","ordType":"market","ccy":"USDT","sz":"10.0"}'
2025-07-29 14:49:31 | INFO     | app.services.okx_service:generate_signature:129 - Длина сообщения: 137
2025-07-29 14:49:31 | INFO     | app.services.okx_service:generate_signature:130 - Body: '{"instId":"BTC-USDT","tdMode":"cash","side":"buy","ordType":"market","ccy":"USDT","sz":"10.0"}' (длина: 94)
2025-07-29 14:49:31 | INFO     | app.services.okx_service:generate_signature:139 - Сгенерирована подпись: ypEII+j+GuIXsdYnWtPWT3AhZu5wlwV+lHKoTyIWzcI=
2025-07-29 14:49:31 | INFO     | app.services.okx_service:get_auth_headers:175 - Сгенерированы заголовки авторизации для POST /api/v5/trade/order
2025-07-29 14:49:32 | INFO     | app.services.okx_service:place_market_order:256 - BUY ORDER RESULT: {"msg":"This API key doesn't have permission to use this function","code":"50120"}
2025-07-29 14:49:32 | ERROR    | app.services.okx_service:buy_btc:515 - Ошибка покупки BTC: This API key doesn't have permission to use this function
2025-07-29 14:49:32 | INFO     | app.api.endpoints:buy_btc_get:382 - Покупка BTC завершена: Ошибка покупки BTC: This API key doesn't have permission to use this function
2025-07-29 14:49:32 | INFO     | app.main:log_requests:58 - Запрос обработан: GET http://localhost:8000/api/v1/buy?buy_amount=10.0 - 200 (0.987s)
2025-07-29 14:49:38 | INFO     | app.main:log_requests:47 - Входящий запрос: GET http://localhost:8000/api/v1/balance
2025-07-29 14:49:38 | INFO     | app.main:log_requests:48 - Клиент: 127.0.0.1, User-Agent: curl/8.13.0
2025-07-29 14:49:38 | INFO     | app.api.endpoints:get_balances:530 - Запрос на получение балансов всех валют
2025-07-29 14:49:38 | INFO     | app.services.okx_service:get_balances:646 - Получение балансов всех валют
2025-07-29 14:49:38 | INFO     | app.services.okx_service:get_server_timestamp:44 - Сгенерирована временная метка ISO 8601 для OKX: 2025-07-29T11:49:38Z
2025-07-29 14:49:38 | INFO     | app.services.okx_service:generate_signature:128 - Сообщение для подписи: '2025-07-29T11:49:38ZGET/api/v5/account/balance'
2025-07-29 14:49:38 | INFO     | app.services.okx_service:generate_signature:129 - Длина сообщения: 46
2025-07-29 14:49:38 | INFO     | app.services.okx_service:generate_signature:130 - Body: '' (длина: 0)
2025-07-29 14:49:38 | INFO     | app.services.okx_service:generate_signature:139 - Сгенерирована подпись: G5Gh+Ava4JB2gNQu5efTjj5Ks7BtpftnM9Gvvs1ZlmI=
2025-07-29 14:49:38 | INFO     | app.services.okx_service:get_auth_headers:175 - Сгенерированы заголовки авторизации для GET /api/v5/account/balance
2025-07-29 14:49:39 | INFO     | app.services.okx_service:get_balances:682 - Балансы успешно получены: {}
2025-07-29 14:49:39 | INFO     | app.api.endpoints:get_balances:541 - Балансы получены: Баланс успешно получен
2025-07-29 14:49:39 | INFO     | app.main:log_requests:58 - Запрос обработан: GET http://localhost:8000/api/v1/balance - 200 (0.291s)
2025-07-29 14:49:44 | INFO     | app.main:log_requests:47 - Входящий запрос: GET http://localhost:8000/api/v1/sell?sell_all=true
2025-07-29 14:49:44 | INFO     | app.main:log_requests:48 - Клиент: 127.0.0.1, User-Agent: curl/8.13.0
2025-07-29 14:49:44 | INFO     | app.api.endpoints:sell_btc_get:481 - GET запрос на продажу BTC: продать все True, инструмент BTC-USDT
2025-07-29 14:49:44 | INFO     | app.services.okx_service:sell_btc:564 - === НАЧАЛО ПРОДАЖИ BTC ===
2025-07-29 14:49:44 | INFO     | app.services.okx_service:sell_btc:565 - Продать все: True
2025-07-29 14:49:44 | INFO     | app.services.okx_service:sell_btc:568 - Инструмент: BTC-USDT
2025-07-29 14:49:44 | INFO     | app.services.okx_service:get_server_timestamp:44 - Сгенерирована временная метка ISO 8601 для OKX: 2025-07-29T11:49:44Z
2025-07-29 14:49:44 | INFO     | app.services.okx_service:generate_signature:128 - Сообщение для подписи: '2025-07-29T11:49:44ZGET/api/v5/account/balance?ccy=BTC'
2025-07-29 14:49:44 | INFO     | app.services.okx_service:generate_signature:129 - Длина сообщения: 54
2025-07-29 14:49:44 | INFO     | app.services.okx_service:generate_signature:130 - Body: '' (длина: 0)
2025-07-29 14:49:44 | INFO     | app.services.okx_service:generate_signature:139 - Сгенерирована подпись: 5B7p+L9p4tZoY/urSqqX6wIHksVqpGByhuBUQ2tcDic=
2025-07-29 14:49:44 | INFO     | app.services.okx_service:get_auth_headers:175 - Сгенерированы заголовки авторизации для GET /api/v5/account/balance?ccy=BTC
2025-07-29 14:49:45 | ERROR    | app.services.okx_service:get_balance:292 - Ошибка API при получении баланса BTC: {'msg': 'APIKey does not match current environment.', 'code': '50101'}
2025-07-29 14:49:45 | INFO     | app.api.endpoints:sell_btc_get:500 - Продажа BTC завершена: Нет доступного BTC для продажи
2025-07-29 14:49:45 | INFO     | app.main:log_requests:58 - Запрос обработан: GET http://localhost:8000/api/v1/sell?sell_all=true - 200 (0.304s)
2025-07-29 14:51:49 | INFO     | app.main:log_requests:47 - Входящий запрос: GET http://localhost:8000/api/v1/balance
2025-07-29 14:51:49 | INFO     | app.main:log_requests:48 - Клиент: 127.0.0.1, User-Agent: curl/8.13.0
2025-07-29 14:51:49 | INFO     | app.api.endpoints:get_balances:530 - Запрос на получение балансов всех валют
2025-07-29 14:51:49 | INFO     | app.services.okx_service:get_balances:645 - Получение балансов всех валют
2025-07-29 14:51:49 | INFO     | app.services.okx_service:get_server_timestamp:44 - Сгенерирована временная метка ISO 8601 для OKX: 2025-07-29T11:51:49Z
2025-07-29 14:51:49 | INFO     | app.services.okx_service:generate_signature:128 - Сообщение для подписи: '2025-07-29T11:51:49ZGET/api/v5/account/balance'
2025-07-29 14:51:49 | INFO     | app.services.okx_service:generate_signature:129 - Длина сообщения: 46
2025-07-29 14:51:49 | INFO     | app.services.okx_service:generate_signature:130 - Body: '' (длина: 0)
2025-07-29 14:51:49 | INFO     | app.services.okx_service:generate_signature:139 - Сгенерирована подпись: yGL5gNUTFN8rKR5q3qsyWcYIHK01aJU3OFZg+uF1h6Y=
2025-07-29 14:51:49 | INFO     | app.services.okx_service:get_auth_headers:176 - Сгенерированы заголовки авторизации для GET /api/v5/account/balance
2025-07-29 14:51:50 | INFO     | app.services.okx_service:get_balances:681 - Балансы успешно получены: {}
2025-07-29 14:51:50 | INFO     | app.api.endpoints:get_balances:541 - Балансы получены: Баланс успешно получен
2025-07-29 14:51:50 | INFO     | app.main:log_requests:58 - Запрос обработан: GET http://localhost:8000/api/v1/balance - 200 (1.130s)
2025-07-29 14:51:55 | INFO     | app.main:log_requests:47 - Входящий запрос: GET http://localhost:8000/api/v1/buy?buy_amount=10.0
2025-07-29 14:51:55 | INFO     | app.main:log_requests:48 - Клиент: 127.0.0.1, User-Agent: curl/8.13.0
2025-07-29 14:51:55 | INFO     | app.api.endpoints:buy_btc_get:369 - GET запрос на покупку BTC: сумма 10.0 USDT, инструмент BTC-USDT
2025-07-29 14:51:55 | INFO     | app.services.okx_service:buy_btc:504 - === НАЧАЛО ПОКУПКИ BTC ===
2025-07-29 14:51:55 | INFO     | app.services.okx_service:buy_btc:505 - Сумма покупки: 10.0 USDT
2025-07-29 14:51:55 | INFO     | app.services.okx_service:buy_btc:506 - Инструмент: BTC-USDT
2025-07-29 14:51:55 | INFO     | app.services.okx_service:place_market_order:244 - BUY BODY: {"instId":"BTC-USDT","tdMode":"cash","side":"buy","ordType":"market","ccy":"USDT","sz":"10.0"}
2025-07-29 14:51:55 | INFO     | app.services.okx_service:get_server_timestamp:44 - Сгенерирована временная метка ISO 8601 для OKX: 2025-07-29T11:51:55Z
2025-07-29 14:51:55 | INFO     | app.services.okx_service:generate_signature:128 - Сообщение для подписи: '2025-07-29T11:51:55ZPOST/api/v5/trade/order{"instId":"BTC-USDT","tdMode":"cash","side":"buy","ordType":"market","ccy":"USDT","sz":"10.0"}'
2025-07-29 14:51:55 | INFO     | app.services.okx_service:generate_signature:129 - Длина сообщения: 137
2025-07-29 14:51:55 | INFO     | app.services.okx_service:generate_signature:130 - Body: '{"instId":"BTC-USDT","tdMode":"cash","side":"buy","ordType":"market","ccy":"USDT","sz":"10.0"}' (длина: 94)
2025-07-29 14:51:55 | INFO     | app.services.okx_service:generate_signature:139 - Сгенерирована подпись: XY5gBbi2jurk5GH+XqqdXlYsNImjKq3D/sa/xEmfamk=
2025-07-29 14:51:55 | INFO     | app.services.okx_service:get_auth_headers:176 - Сгенерированы заголовки авторизации для POST /api/v5/trade/order
2025-07-29 14:51:55 | INFO     | app.services.okx_service:place_market_order:256 - BUY ORDER RESULT: {"msg":"This API key doesn't have permission to use this function","code":"50120"}
2025-07-29 14:51:55 | ERROR    | app.services.okx_service:buy_btc:514 - Ошибка покупки BTC: This API key doesn't have permission to use this function
2025-07-29 14:51:55 | INFO     | app.api.endpoints:buy_btc_get:382 - Покупка BTC завершена: Ошибка покупки BTC: This API key doesn't have permission to use this function
2025-07-29 14:51:55 | INFO     | app.main:log_requests:58 - Запрос обработан: GET http://localhost:8000/api/v1/buy?buy_amount=10.0 - 200 (0.336s)
2025-07-29 14:52:05 | INFO     | app.main:log_requests:47 - Входящий запрос: GET http://localhost:8000/api/v1/health
2025-07-29 14:52:05 | INFO     | app.main:log_requests:48 - Клиент: 127.0.0.1, User-Agent: curl/8.13.0
2025-07-29 14:52:05 | INFO     | app.services.okx_service:get_server_timestamp:44 - Сгенерирована временная метка ISO 8601 для OKX: 2025-07-29T11:52:05Z
2025-07-29 14:52:05 | INFO     | app.main:log_requests:58 - Запрос обработан: GET http://localhost:8000/api/v1/health - 200 (0.006s)
2025-07-30 17:04:18 | INFO     | app.main:log_requests:47 - Входящий запрос: GET http://localhost:8000/api/v1/health
2025-07-30 17:04:18 | INFO     | app.main:log_requests:48 - Клиент: 127.0.0.1, User-Agent: curl/8.13.0
2025-07-30 17:04:18 | INFO     | app.services.okx_service:get_server_timestamp:44 - Сгенерирована временная метка ISO 8601 для OKX: 2025-07-30T14:04:18Z
2025-07-30 17:04:18 | INFO     | app.main:log_requests:58 - Запрос обработан: GET http://localhost:8000/api/v1/health - 200 (0.002s)
2025-07-30 17:04:23 | INFO     | app.main:log_requests:47 - Входящий запрос: GET http://localhost:8000/api/v1/market/analytics?inst_id=BTC-USDT
2025-07-30 17:04:23 | INFO     | app.main:log_requests:48 - Клиент: 127.0.0.1, User-Agent: curl/8.13.0
2025-07-30 17:04:23 | INFO     | app.api.endpoints:get_market_analytics:591 - Запрос аналитических данных для BTC-USDT
2025-07-30 17:04:23 | INFO     | app.api.endpoints:get_market_analytics:592 - Параметры: bar=1m, depth=20, current_limit=100, history_limit=1000
2025-07-30 17:04:23 | INFO     | app.services.okx_service:get_market_analytics:915 - === НАЧАЛО ПОЛУЧЕНИЯ АНАЛИТИКИ ДЛЯ BTC-USDT ===
2025-07-30 17:04:23 | INFO     | app.services.okx_service:get_orderbook:705 - Получение стакана ордеров для BTC-USDT с глубиной 20
2025-07-30 17:04:24 | INFO     | app.services.okx_service:get_orderbook:723 - Стакан ордеров для BTC-USDT успешно получен
2025-07-30 17:04:24 | INFO     | app.services.okx_service:get_current_candles:748 - Получение текущих свечей для BTC-USDT, интервал 1m, количество 100
2025-07-30 17:04:25 | INFO     | app.services.okx_service:get_current_candles:766 - Текущие свечи для BTC-USDT успешно получены
2025-07-30 17:04:25 | INFO     | app.services.okx_service:get_history_candles:791 - Получение исторических свечей для BTC-USDT, интервал 1m, количество 1000
2025-07-30 17:04:25 | INFO     | app.services.okx_service:get_history_candles:809 - Исторические свечи для BTC-USDT успешно получены
2025-07-30 17:04:25 | INFO     | app.services.okx_service:get_active_orders:832 - Получение активных ордеров для BTC-USDT
2025-07-30 17:04:25 | INFO     | app.services.okx_service:get_server_timestamp:44 - Сгенерирована временная метка ISO 8601 для OKX: 2025-07-30T14:04:25Z
2025-07-30 17:04:25 | INFO     | app.services.okx_service:generate_signature:128 - Сообщение для подписи: '2025-07-30T14:04:25ZGET/api/v5/trade/orders-pending?instId=BTC-USDT'
2025-07-30 17:04:25 | INFO     | app.services.okx_service:generate_signature:129 - Длина сообщения: 67
2025-07-30 17:04:25 | INFO     | app.services.okx_service:generate_signature:130 - Body: '' (длина: 0)
2025-07-30 17:04:25 | INFO     | app.services.okx_service:generate_signature:139 - Сгенерирована подпись: OG3sit35nxKwUOnMk8Uvz6N6SyQEc2GgaRlMKIqMszU=
2025-07-30 17:04:25 | INFO     | app.services.okx_service:get_auth_headers:176 - Сгенерированы заголовки авторизации для GET /api/v5/trade/orders-pending?instId=BTC-USDT
2025-07-30 17:04:25 | INFO     | app.services.okx_service:get_active_orders:851 - Активные ордера для BTC-USDT успешно получены
2025-07-30 17:04:25 | INFO     | app.services.okx_service:get_balances:645 - Получение балансов всех валют
2025-07-30 17:04:25 | INFO     | app.services.okx_service:get_server_timestamp:44 - Сгенерирована временная метка ISO 8601 для OKX: 2025-07-30T14:04:25Z
2025-07-30 17:04:25 | INFO     | app.services.okx_service:generate_signature:128 - Сообщение для подписи: '2025-07-30T14:04:25ZGET/api/v5/account/balance'
2025-07-30 17:04:25 | INFO     | app.services.okx_service:generate_signature:129 - Длина сообщения: 46
2025-07-30 17:04:25 | INFO     | app.services.okx_service:generate_signature:130 - Body: '' (длина: 0)
2025-07-30 17:04:25 | INFO     | app.services.okx_service:generate_signature:139 - Сгенерирована подпись: F8AmK+Gd+MwlAcAyzNFB8RTyPWYVTDoDeOkNfTXTtsU=
2025-07-30 17:04:25 | INFO     | app.services.okx_service:get_auth_headers:176 - Сгенерированы заголовки авторизации для GET /api/v5/account/balance
2025-07-30 17:04:26 | INFO     | app.services.okx_service:get_balances:681 - Балансы успешно получены: {}
2025-07-30 17:04:26 | INFO     | app.services.okx_service:get_ticker_data:874 - Получение данных тикера для BTC-USDT
2025-07-30 17:04:26 | INFO     | app.services.okx_service:get_ticker_data:892 - Данные тикера для BTC-USDT успешно получены
2025-07-30 17:04:26 | INFO     | app.services.okx_service:get_server_timestamp:44 - Сгенерирована временная метка ISO 8601 для OKX: 2025-07-30T14:04:26Z
2025-07-30 17:04:26 | INFO     | app.services.okx_service:get_market_analytics:960 - === АНАЛИТИКА ЗАВЕРШЕНА ДЛЯ BTC-USDT ===
2025-07-30 17:04:26 | ERROR    | app.api.endpoints:get_market_analytics:612 - Ошибка валидации: 1 validation error for AnalyticsResponse
market_data.orderbook
  Input should be a valid dictionary [type=dict_type, input_value=[{'asks': [['117708.6', '... 'ts': '1753884264309'}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.8/v/dict_type
2025-07-30 17:04:26 | INFO     | app.main:log_requests:58 - Запрос обработан: GET http://localhost:8000/api/v1/market/analytics?inst_id=BTC-USDT - 400 (2.850s)
2025-07-30 17:04:30 | INFO     | app.main:log_requests:47 - Входящий запрос: GET http://localhost:8000/api/v1/market/analytics
2025-07-30 17:04:30 | INFO     | app.main:log_requests:48 - Клиент: 127.0.0.1, User-Agent: curl/8.13.0
2025-07-30 17:04:30 | INFO     | app.api.endpoints:get_market_analytics:591 - Запрос аналитических данных для BTC-USDT
2025-07-30 17:04:30 | INFO     | app.api.endpoints:get_market_analytics:592 - Параметры: bar=1m, depth=20, current_limit=100, history_limit=1000
2025-07-30 17:04:30 | INFO     | app.services.okx_service:get_market_analytics:915 - === НАЧАЛО ПОЛУЧЕНИЯ АНАЛИТИКИ ДЛЯ BTC-USDT ===
2025-07-30 17:04:30 | INFO     | app.services.okx_service:get_orderbook:705 - Получение стакана ордеров для BTC-USDT с глубиной 20
2025-07-30 17:04:30 | INFO     | app.services.okx_service:get_orderbook:723 - Стакан ордеров для BTC-USDT успешно получен
2025-07-30 17:04:30 | INFO     | app.services.okx_service:get_current_candles:748 - Получение текущих свечей для BTC-USDT, интервал 1m, количество 100
2025-07-30 17:04:30 | INFO     | app.services.okx_service:get_current_candles:766 - Текущие свечи для BTC-USDT успешно получены
2025-07-30 17:04:30 | INFO     | app.services.okx_service:get_history_candles:791 - Получение исторических свечей для BTC-USDT, интервал 1m, количество 1000
2025-07-30 17:04:31 | INFO     | app.services.okx_service:get_history_candles:809 - Исторические свечи для BTC-USDT успешно получены
2025-07-30 17:04:31 | INFO     | app.services.okx_service:get_active_orders:832 - Получение активных ордеров для BTC-USDT
2025-07-30 17:04:31 | INFO     | app.services.okx_service:get_server_timestamp:44 - Сгенерирована временная метка ISO 8601 для OKX: 2025-07-30T14:04:31Z
2025-07-30 17:04:31 | INFO     | app.services.okx_service:generate_signature:128 - Сообщение для подписи: '2025-07-30T14:04:31ZGET/api/v5/trade/orders-pending?instId=BTC-USDT'
2025-07-30 17:04:31 | INFO     | app.services.okx_service:generate_signature:129 - Длина сообщения: 67
2025-07-30 17:04:31 | INFO     | app.services.okx_service:generate_signature:130 - Body: '' (длина: 0)
2025-07-30 17:04:31 | INFO     | app.services.okx_service:generate_signature:139 - Сгенерирована подпись: 6P2C1mBzEG3iZyH6yx/Ufrguxed7sKQPTFnZPak0l1c=
2025-07-30 17:04:31 | INFO     | app.services.okx_service:get_auth_headers:176 - Сгенерированы заголовки авторизации для GET /api/v5/trade/orders-pending?instId=BTC-USDT
2025-07-30 17:04:31 | INFO     | app.services.okx_service:get_active_orders:851 - Активные ордера для BTC-USDT успешно получены
2025-07-30 17:04:31 | INFO     | app.services.okx_service:get_balances:645 - Получение балансов всех валют
2025-07-30 17:04:31 | INFO     | app.services.okx_service:get_server_timestamp:44 - Сгенерирована временная метка ISO 8601 для OKX: 2025-07-30T14:04:31Z
2025-07-30 17:04:31 | INFO     | app.services.okx_service:generate_signature:128 - Сообщение для подписи: '2025-07-30T14:04:31ZGET/api/v5/account/balance'
2025-07-30 17:04:31 | INFO     | app.services.okx_service:generate_signature:129 - Длина сообщения: 46
2025-07-30 17:04:31 | INFO     | app.services.okx_service:generate_signature:130 - Body: '' (длина: 0)
2025-07-30 17:04:31 | INFO     | app.services.okx_service:generate_signature:139 - Сгенерирована подпись: fqGCjsMy/3rtdkfSdcpDqMUXlYOBr8OFCC022Za6dBI=
2025-07-30 17:04:31 | INFO     | app.services.okx_service:get_auth_headers:176 - Сгенерированы заголовки авторизации для GET /api/v5/account/balance
2025-07-30 17:04:31 | INFO     | app.services.okx_service:get_balances:681 - Балансы успешно получены: {}
2025-07-30 17:04:31 | INFO     | app.services.okx_service:get_ticker_data:874 - Получение данных тикера для BTC-USDT
2025-07-30 17:04:32 | INFO     | app.services.okx_service:get_ticker_data:892 - Данные тикера для BTC-USDT успешно получены
2025-07-30 17:04:32 | INFO     | app.services.okx_service:get_server_timestamp:44 - Сгенерирована временная метка ISO 8601 для OKX: 2025-07-30T14:04:32Z
2025-07-30 17:04:32 | INFO     | app.services.okx_service:get_market_analytics:960 - === АНАЛИТИКА ЗАВЕРШЕНА ДЛЯ BTC-USDT ===
2025-07-30 17:04:32 | ERROR    | app.api.endpoints:get_market_analytics:612 - Ошибка валидации: 1 validation error for AnalyticsResponse
market_data.orderbook
  Input should be a valid dictionary [type=dict_type, input_value=[{'asks': [['117708.1', '... 'ts': '1753884269859'}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.8/v/dict_type
2025-07-30 17:04:32 | INFO     | app.main:log_requests:58 - Запрос обработан: GET http://localhost:8000/api/v1/market/analytics - 400 (1.888s)
2025-07-30 17:04:35 | INFO     | app.main:log_requests:47 - Входящий запрос: GET http://localhost:8000/docs
2025-07-30 17:04:35 | INFO     | app.main:log_requests:48 - Клиент: 127.0.0.1, User-Agent: curl/8.13.0
2025-07-30 17:04:35 | INFO     | app.main:log_requests:58 - Запрос обработан: GET http://localhost:8000/docs - 200 (0.002s)
